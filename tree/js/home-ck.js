// modified from http://jquery-howto.blogspot.com/2009/09/get-url-parameters-values-with-jquery.html
function getUrlVars(){var e=[],t,n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++){t=n[r].split("=");e.push(t[0]);e[t[0]]=decodeURIComponent(t[1])}return e}var searchPrompt="Search by ingredient name...";jQuery(document).ready(function(){$("#searchField").val(searchPrompt).addClass("empty");$("#searchField").focus(function(){$(this).val()===searchPrompt&&$(this).val("").removeClass("empty")});$("#searchField").blur(function(){$(this).val()===""&&$(this).val(searchPrompt).addClass("empty")});$("#searchField").keyup(function(){var e=$("#searchField").val(),t=$("#searchResultsFull");e.length>0?$("#resetsearch").css("opacity","1.0"):$("#resetsearch").css("opacity","0.5");e.length>1?$.getJSON("/search/ing/"+e,function(n){t.empty();if(n.length>0){t.append($("<ul>"));for(var r=0;r<n.length;r++)r<n.length&&t.append($('<li><a tabindex="-1" href="/tree/ing-'+n[r].iid+'.html">'+n[r].name+" ("+n[r].context+")</a></li>"));t.append($("</ul>"))}else e.length>0?t.append($("<li><em>No matches. Try searching on the first few letters of a product or category.</em></li>")):t.empty()}):t.empty()});$("#resetsearch").click(function(){$("#searchResultsFull").empty();$("#searchField").val("");$("#resetsearch").css("opacity","0.5")});if(getUrlVars().q){$("#searchField").val(getUrlVars().q);$("#searchField").keyup()}});